var queueStatus=0,infamyRanks=["Guardian I","Guardian II","Guardian III","Brave I","Brave II","Brave III","Heroic I","Heroic II","Heroic III","Fabled I","Fabled II","Fabled III","Mythic I","Mythic II","Mythic III","Legend"];function formatNumber(t){const e=[{divider:1e18,suffix:"E"},{divider:1e15,suffix:"P"},{divider:1e12,suffix:"T"},{divider:1e9,suffix:"G"},{divider:1e6,suffix:"M"},{divider:1e3,suffix:"k"}];for(var a=0;a<e.length;a++)if(t>=e[a].divider)return parseFloat(t/e[a].divider).toFixed(2)+" "+e[a].suffix;return t.toString()}$(document).ready(function(){$.get("/bungie/members/get",function(t){t.length>0?($(".loader-text").text("Fetching Gambit Stats..."),$.get("/bungie/gambit/get",function(e){for(var a=[],i=0;i<t.length;i++)$(".loader-text").text("Processing "+(i+1)+" of "+t.length+"..."),gambitData=e.filter(function(e){return e.user_id==t[i].destinyUserInfo.membershipId})[0],gambitData&&(infamy_rank=gambitData.infamy_step==infamyRanks.length?infamyRanks[infamyRanks.length-1]:infamyRanks[gambitData.infamy_step],a.push({name:t[i].destinyUserInfo.displayName,infamy:gambitData.infamy,infamy_step:infamy_rank,infamy_resets:gambitData.infamy_resets,kills:gambitData.kills,deaths:gambitData.deaths,kd:gambitData.killsDeathsRatio,activitiesEntered:gambitData.activitiesEntered,activitiesWon:gambitData.activitiesEntered>0?gambitData.activitiesWon/gambitData.activitiesEntered*100:0,invasionKills:gambitData.invasionKills,invaderKills:gambitData.invaderKills,invaderDeaths:gambitData.invaderDeaths,primevalHealing:gambitData.primevalHealing,primevalDamage:gambitData.primevalDamage,motesDeposited:gambitData.motesDeposited,motesLost:gambitData.motesLost,motesDenied:gambitData.motesDenied}));$(".loader-text").text("Generating Table..."),$(".stats-container").append('<div id="gambit-stats-table"></div>'),$(".loader").hide(),$(".loader-text").hide();var r={precision:0};new Tabulator("#gambit-stats-table",{data:a,layout:"fitColumns",columns:[{title:"Name",field:"name",frozen:!0},{title:"Infamy",field:"infamy",formatter:"money",formatterParams:r},{title:"Infamy Rank",field:"infamy_step"},{title:"Resets",field:"infamy_resets",formatter:"money",formatterParams:r},{title:"Kills",field:"kills",formatter:"money",formatterParams:r},{title:"Deaths",field:"deaths",formatter:"money",formatterParams:r},{title:"KD",field:"kd",formatter:"money",formatterParams:{precision:2}},{title:"Played",field:"activitiesEntered",formatter:"money",formatterParams:r},{title:"Win %",field:"activitiesWon",formatter:"money",formatterParams:r},{title:"Invasion Kills",field:"invasionKills",formatter:"money",formatterParams:r},{title:"Invaders Killed",field:"invaderKills",formatter:"money",formatterParams:r},{title:"Deaths by Invader",field:"invaderDeaths",formatter:"money",formatterParams:r},{title:"Primeval Healing (%)",field:"primevalHealing",formatter:"money",formatterParams:r},{title:"Primeval Damage",field:"primevalDamage",formatter:"money",formatterParams:r},{title:"Motes Banked",field:"motesDeposited",formatter:"money",formatterParams:r},{title:"Motes Lost",field:"motesLost",formatter:"money",formatterParams:r},{title:"Motes Denied",field:"motesDenied",formatter:"money",formatterParams:r}],initialSort:[{column:"name",dir:"asc"}],layout:"fitDataFill",height:"500px",resizableColumns:!1}),$(".stats-container").append('<div id="weapon-stats-info" class="text-center"><small>Last checked: '+gambitData.last_updated+"</small></div>")})):$(".loader-text").html("Unable to retrieve members ðŸ˜Ÿ <br/>Bungie API might be under maintenance")})});
