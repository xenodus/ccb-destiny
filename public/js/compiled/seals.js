$(document).ready(function(){$.ajax({url:ccbNS.bungie_api_url+"/GroupV2/"+ccbNS.clan_id+"/Members/",headers:{"X-API-Key":ccbNS.bungie_api}}).fail(function(){$(".loader-text").html("Unable to retrieve members ðŸ˜Ÿ <br/>Bungie API might be under maintenance")}).done(function(e){e.Response.results&&e.Response.results.length>0?(memberData=e.Response.results,$(".loader-text").text("Fetching Triumphs..."),$.get("/clan/seals/get",function(e){for(var t=[],a=[{title:"Name",field:"name",frozen:!0}],n=0;n<e.length;n++){var i=memberData.filter(function(t){return t.destinyUserInfo.membershipId==e[n].id}).map(function(e){return e.destinyUserInfo.displayName})[0],s=document.createElement("textarea");s.innerHTML=i;var l={name:s.value},r=JSON.parse(e[n].data),o=0;for(const e in r)l[e]=r[e]>0?'<i class="fas fa-check text-success"></i>':'<i class="fas fa-times text-danger"></i>',o=r[e]>0?o+1:o,0==n&&a.push({title:e,field:e,formatter:"html",cssClass:"text-center"});l.total=o,l.link='<a href="/clan/seals/member/'+e[n].id+'">Go</a>',t.push(l)}a.push({title:"Total",field:"total",cssClass:"text-center",visible:!0}),a.push({title:"Details",field:"link",formatter:"html",cssClass:"text-center"}),$(".stats-container").append('<div id="stats-table"></div>'),$(".loader").hide(),$(".loader-text").hide(),$(".filter-container").show();var c=new Tabulator("#stats-table",{data:t,columns:a,initialSort:[{column:"name",dir:"asc"},{column:"total",dir:"desc"}],layout:"fitDataFill",height:"500px",resizableColumns:!1});$("#nameFilter").on("input",function(){c.setFilter("name","like",$(this).val())})})):$(".loader-text").html("Unable to retrieve members ðŸ˜Ÿ <br/>Bungie API might be under maintenance")})});
