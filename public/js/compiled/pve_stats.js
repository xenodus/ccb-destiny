var queueStatus=0;$(document).ready(function(){$.ajax({url:ccbNS.bungie_api_url+"/GroupV2/"+ccbNS.clan_id+"/Members/",headers:{"X-API-Key":ccbNS.bungie_api}}).fail(function(){$(".loader-text").html("Unable to retrieve members ðŸ˜Ÿ <br/>Bungie API might be under maintenance")}).done(function(e){e.Response.results&&e.Response.results.length>0?(memberData=e.Response.results,$(".loader-text").text("Fetching PvE Stats..."),$.get("/bungie/pve/get",function(e){for(var t=[],a=0;a<memberData.length;a++)$(".loader-text").text("Processing "+(a+1)+" of "+memberData.length+"..."),pveData=e.filter(function(e){return e.user_id==memberData[a].destinyUserInfo.membershipId})[0],pveData&&t.push({name:memberData[a].destinyUserInfo.displayName,kills:pveData.kills,deaths:pveData.deaths,suicides:pveData.suicides,killsDeathsRatio:pveData.killsDeathsRatio,activitiesCleared:pveData.activitiesCleared,weaponKillsSuper:pveData.weaponKillsSuper,weaponKillsMelee:pveData.weaponKillsMelee,weaponKillsGrenade:pveData.weaponKillsGrenade,publicEventsCompleted:pveData.publicEventsCompleted,heroicPublicEventsCompleted:pveData.heroicPublicEventsCompleted});$(".loader-text").text("Generating Table..."),$(".stats-container").append('<div id="pve-stats-table"></div>'),$(".loader").hide(),$(".loader-text").hide(),$(".filter-container").show();var i={precision:0},l=new Tabulator("#pve-stats-table",{data:t,layout:"fitColumns",columns:[{title:"Name",field:"name",formatter:"money",formatterParams:i,frozen:!0},{title:"Kills",field:"kills",formatter:"money",formatterParams:i},{title:"Deaths",field:"deaths",formatter:"money",formatterParams:i},{title:"Suicides",field:"suicides",formatter:"money",formatterParams:i},{title:"K/D",field:"killsDeathsRatio",formatter:"money",formatterParams:i},{title:"Activities",field:"activitiesCleared",formatter:"money",formatterParams:i},{title:"Super Kills",field:"weaponKillsSuper",formatter:"money",formatterParams:i},{title:"Melee Kills",field:"weaponKillsMelee",formatter:"money",formatterParams:i},{title:"Grenade Kills",field:"weaponKillsGrenade",formatter:"money",formatterParams:i},{title:"Public Event",field:"publicEventsCompleted",formatter:"money",formatterParams:i},{title:"Heroic Public Event",field:"heroicPublicEventsCompleted",formatter:"money",formatterParams:i}],initialSort:[{column:"name",dir:"asc"}],layout:"fitDataFill",height:"500px",resizableColumns:!1});$("#nameFilter").on("input",function(){l.setFilter("name","like",$(this).val())}),$(".stats-container").append('<div id="weapon-stats-info" class="text-center"><small>Last checked: '+pveData.last_updated+"</small></div>")})):$(".loader-text").html("Unable to retrieve members ðŸ˜Ÿ <br/>Bungie API might be under maintenance")})});
