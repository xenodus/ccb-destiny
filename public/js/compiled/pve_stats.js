var queueStatus=0;$(document).ready(function(){$.ajax({url:"https://www.bungie.net/Platform/GroupV2/3717919/Members/",headers:{"X-API-Key":"856136fabe704c149dd4bd41344b54c8"}}).done(function(e){e.Response.results&&e.Response.results.length>0?(memberData=e.Response.results,$(".loader-text").text("Fetching PvE Stats..."),$.get("/bungie/pve/get",function(e){for(var t=[],a=0;a<memberData.length;a++)$(".loader-text").text("Processing "+(a+1)+" of "+memberData.length+"..."),pveData=e.filter(function(e){return e.user_id==memberData[a].destinyUserInfo.membershipId})[0],pveData&&t.push({name:memberData[a].destinyUserInfo.displayName,kills:pveData.kills,deaths:pveData.deaths,suicides:pveData.suicides,killsDeathsRatio:pveData.killsDeathsRatio,activitiesCleared:pveData.activitiesCleared,weaponKillsSuper:pveData.weaponKillsSuper,weaponKillsMelee:pveData.weaponKillsMelee,weaponKillsGrenade:pveData.weaponKillsGrenade,publicEventsCompleted:pveData.publicEventsCompleted,heroicPublicEventsCompleted:pveData.heroicPublicEventsCompleted});$(".loader-text").text("Generating Table..."),$(".stats-container").append('<div id="pve-stats-table"></div>'),$(".loader").hide(),$(".loader-text").hide();var l={precision:0};new Tabulator("#pve-stats-table",{data:t,layout:"fitColumns",columns:[{title:"Name",field:"name",formatter:"money",formatterParams:l,frozen:!0},{title:"Kills",field:"kills",formatter:"money",formatterParams:l},{title:"Deaths",field:"deaths",formatter:"money",formatterParams:l},{title:"Suicides",field:"suicides",formatter:"money",formatterParams:l},{title:"K/D",field:"killsDeathsRatio",formatter:"money",formatterParams:l},{title:"Activities",field:"activitiesCleared",formatter:"money",formatterParams:l},{title:"Super Kills",field:"weaponKillsSuper",formatter:"money",formatterParams:l},{title:"Melee Kills",field:"weaponKillsMelee",formatter:"money",formatterParams:l},{title:"Grenade Kills",field:"weaponKillsGrenade",formatter:"money",formatterParams:l},{title:"Public Event",field:"publicEventsCompleted",formatter:"money",formatterParams:l},{title:"Heroic Public Event",field:"heroicPublicEventsCompleted",formatter:"money",formatterParams:l}],initialSort:[{column:"name",dir:"asc"}],layout:"fitDataFill",height:"500px",resizableColumns:!1}),$(".stats-container").append('<div id="weapon-stats-info" class="text-center"><small>Last checked: '+pveData.last_updated+"</small></div>")})):$(".loader-text").html("Unable to retrieve members ðŸ˜Ÿ <br/>Bungie API might be under maintenance")})});
