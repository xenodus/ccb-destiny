var queueStatus=0;$(document).ready(function(){$.get("/bungie/members/get",function(e){e.length>0?($(".loader-text").text("Fetching PvE Stats..."),$.get("/bungie/pve/get",function(t){for(var a=[],i=0;i<e.length;i++)$(".loader-text").text("Processing "+(i+1)+" of "+e.length+"..."),pveData=t.filter(function(t){return t.user_id==e[i].destinyUserInfo.membershipId})[0],pveData&&a.push({name:e[i].destinyUserInfo.displayName,kills:pveData.kills,deaths:pveData.deaths,suicides:pveData.suicides,killsDeathsRatio:pveData.killsDeathsRatio,activitiesCleared:pveData.activitiesCleared,weaponKillsSuper:pveData.weaponKillsSuper,weaponKillsMelee:pveData.weaponKillsMelee,weaponKillsGrenade:pveData.weaponKillsGrenade,publicEventsCompleted:pveData.publicEventsCompleted,heroicPublicEventsCompleted:pveData.heroicPublicEventsCompleted});$(".loader-text").text("Generating Table..."),$(".stats-container").append('<div id="pve-stats-table"></div>'),$(".loader").hide(),$(".loader-text").hide();var l={precision:0};new Tabulator("#pve-stats-table",{data:a,layout:"fitColumns",columns:[{title:"Name",field:"name",formatter:"money",formatterParams:l,frozen:!0},{title:"Kills",field:"kills",formatter:"money",formatterParams:l},{title:"Deaths",field:"deaths",formatter:"money",formatterParams:l},{title:"Suicides",field:"suicides",formatter:"money",formatterParams:l},{title:"K/D",field:"killsDeathsRatio",formatter:"money",formatterParams:l},{title:"Activities",field:"activitiesCleared",formatter:"money",formatterParams:l},{title:"Super Kills",field:"weaponKillsSuper",formatter:"money",formatterParams:l},{title:"Melee Kills",field:"weaponKillsMelee",formatter:"money",formatterParams:l},{title:"Grenade Kills",field:"weaponKillsGrenade",formatter:"money",formatterParams:l},{title:"Public Event",field:"publicEventsCompleted",formatter:"money",formatterParams:l},{title:"Heroic Public Event",field:"heroicPublicEventsCompleted",formatter:"money",formatterParams:l}],initialSort:[{column:"name",dir:"asc"}],layout:"fitDataFill",height:"500px",resizableColumns:!1}),$(".stats-container").append('<div id="weapon-stats-info" class="text-center"><small>Last checked: '+pveData.last_updated+"</small></div>")})):$(".loader-text").html("Unable to retrieve members ðŸ˜Ÿ <br/>Bungie API might be under maintenance")})});
