var queueStatus=0;$(document).ready(function(){$.get("/bungie/members/get",function(e){e.length>0?($(".loader-text").text("Fetching Weapon Stats..."),$.get("/bungie/weapon/get",function(a){for(var t=[],l=0;l<e.length;l++)$(".loader-text").text("Processing "+(l+1)+" of "+e.length+"..."),weaponData=a.filter(function(a){return a.user_id==e[l].destinyUserInfo.membershipId})[0],t.push({name:e[l].destinyUserInfo.displayName,weaponKillsAutoRifle:weaponData.weaponKillsAutoRifle,weaponKillsBow:weaponData.weaponKillsBow,weaponKillsFusionRifle:weaponData.weaponKillsFusionRifle,weaponKillsHandCannon:weaponData.weaponKillsHandCannon,weaponKillsTraceRifle:weaponData.weaponKillsTraceRifle,weaponKillsPulseRifle:weaponData.weaponKillsPulseRifle,weaponKillsRocketLauncher:weaponData.weaponKillsRocketLauncher,weaponKillsScoutRifle:weaponData.weaponKillsScoutRifle,weaponKillsShotgun:weaponData.weaponKillsShotgun,weaponKillsSniper:weaponData.weaponKillsSniper,weaponKillsSubmachinegun:weaponData.weaponKillsSubmachinegun,weaponKillsSideArm:weaponData.weaponKillsSideArm,weaponKillsSword:weaponData.weaponKillsSword,weaponKillsGrenadeLauncher:weaponData.weaponKillsGrenadeLauncher});$(".loader-text").text("Generating Table..."),$(".stats-container").append('<div id="weapon-stats-table"></div>'),$(".loader").hide(),$(".loader-text").hide();var n={precision:0};new Tabulator("#weapon-stats-table",{data:t,layout:"fitColumns",columns:[{title:"Name",field:"name",frozen:!0},{title:"Auto Rifle",field:"weaponKillsAutoRifle",formatter:"money",formatterParams:n},{title:"Bow",field:"weaponKillsBow",formatter:"money",formatterParams:n},{title:"Fusion Rifle",field:"weaponKillsFusionRifle",formatter:"money",formatterParams:n},{title:"Hand Cannon",field:"weaponKillsHandCannon",formatter:"money",formatterParams:n},{title:"Trace Rifle",field:"weaponKillsTraceRifle",formatter:"money",formatterParams:n},{title:"Pulse Rifle",field:"weaponKillsPulseRifle",formatter:"money",formatterParams:n},{title:"Rocket Launcher",field:"weaponKillsRocketLauncher",formatter:"money",formatterParams:n},{title:"Scout Rifle",field:"weaponKillsScoutRifle",formatter:"money",formatterParams:n},{title:"Shotgun",field:"weaponKillsShotgun",formatter:"money",formatterParams:n},{title:"Sniper",field:"weaponKillsSniper",formatter:"money",formatterParams:n},{title:"SMG",field:"weaponKillsSubmachinegun",formatter:"money",formatterParams:n},{title:"Sidearm",field:"weaponKillsSideArm",formatter:"money",formatterParams:n},{title:"Sword",field:"weaponKillsSword",formatter:"money",formatterParams:n},{title:"Grenade Launcher",field:"weaponKillsGrenadeLauncher",formatter:"money",formatterParams:n}],layout:"fitDataFill",resizableColumns:!1}),$(".stats-container").append('<div id="weapon-stats-info" class="text-center"><small>Last checked: '+weaponData.last_updated+"</small></div>")})):$(".loader-text").html("Unable to retrieve members ðŸ˜Ÿ <br/>Bungie API might be under maintenance")})});
